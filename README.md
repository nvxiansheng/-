# -进程、线程和协程
1.进程之间的切换开销较大
2.一个标准的线程由线程ID，当前指令指针PC，寄存器和堆栈组成；进程由内存空间：代码、数据、进程空间、打开的文件和一个或多个线程组成
3.通过硬件的计数器中断处理器，让该线程强制暂停并将该线程的寄存器放入内存中。
4.线程是一个进程中代码的不同执行路线。
5.上下文切换-系统调用
## -超线程
利用特殊的硬件指令，把一个物理芯片模拟成两个逻辑处理核心，让单个处理器都能使用线程级并行计算，进而兼容多线程操作系统和软件，减少了CPU的闲置时间，提高的CPU的运行效率。这种超线程技术(如双核四线程)由处理器硬件的决定，同时也需要操作系统的支持才能在计算机中表现出来。
## -协程
每个请求占用一个线程去完成完整的业务逻辑，系统的吞吐能力取决于每个线程的操作耗时，遇到很耗时的I/O行为，整个系统的吞吐立刻下降，如果线程很多时候，会存在很多线程处于空闲状态，造成了资源应用不彻底--*单线程加异步回调*
1.线程的默认stack是1M，协程是1K。  
2.由于在同一个线程上，可以避免竞争关系使用锁  
3.适用于被阻塞的，需要大量并发情况，不适用于大量计算的多线程，遇到这种情况，更好用线程去解决。  
比较项	线程	协程
占用资源	初始单位为1MB,固定不可变	初始一般为 2KB，可随需要而增大  
调度所属	由 OS 的内核完成	由用户完成  
切换开销	涉及模式切换(从用户态切换到内核态)、16个寄存器、PC、SP...等寄存器的刷新等	只有三个寄存器的值修改 - PC / SP / DX.  
性能问题	资源占用太高，频繁创建销毁会带来严重的性能问题	资源占用小,不会带来严重的性能问题  
数据同步	需要用锁等机制确保数据的一直性和可见性	不需要多线程的锁机制，因为只有一个线程，也不存在同时写变量冲突，在协程中控制共享资源不加锁，只需要判断状态就好了，所以执行效率比多线程高很多。
